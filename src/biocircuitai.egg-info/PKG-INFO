Metadata-Version: 2.4
Name: biocircuitai
Version: 0.0.0
Summary: Surrogate-driven design of genetic circuits
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy
Requires-Dist: scipy
Requires-Dist: pandas
Requires-Dist: matplotlib
Requires-Dist: optuna
Requires-Dist: torch
Requires-Dist: scikit-learn
Requires-Dist: joblib

**BioCircuitAI**

Surrogate-driven design of simple genetic circuits with simulation, learning, and optimization in one place. Run a full DBTL loop on a toggle switch in minutes; extend to your own models when ready.

**At a Glance**
- End-to-end pipeline: ODE simulation → dataset → surrogate training → Bayesian optimization → validation plots.
- Surrogate-first search: PyTorch MLP trained on log/standardized features; Optuna TPE targets steady-state goals.
- Reproducible: deterministic seeds, Windows-safe multiprocessing, registry CSV logging.
- Extensible: swap ODEs, targets, or objectives without touching the whole stack.

**Quick Start (local)**
- Python 3.10+ recommended. Create an env and install deps:
  - `python -m venv .venv && .venv\Scripts\activate`
  - `pip install -r requirements.txt`
  - `pip install -e .`  
- Run the full DBTL loop (sweep → train → multi-target BO → validate):
  - `python scripts/run_dbtl.py --workers 1 --epochs 60 --bs 512 --trials 80 --targets "10:8:default"`
- Minimal sanity tests (expects a dataset/model at default paths):
  - `pytest -q`

**One-Liners by Stage**
```bash
# Full loop with registry logging (Windows-safe; adjust workers as needed)
python scripts/run_dbtl.py --workers 6 --trials 40 --targets "10:8:default,1:8:flip"

# Generate dataset (toggle-switch grid sweep)
python scripts/run_simulation.py --workers 1 --chunksize 1000 --out data/processed/toggle_dataset.csv

# Train surrogate (normalized MLP)
python scripts/train_surrogate.py --csv data/processed/toggle_dataset.csv --epochs 60 --bs 512 --lr 1e-3 --hidden 256,256 --out data/models/surrogate.pt

# Optimize to a target phenotype and validate with the true ODE
python scripts/optimize_circuit.py --model data/models/surrogate.pt --targetA 10 --targetB 8 --trials 80 --outdir data/opt/

# Batch multi-target optimization with summary CSV
python scripts/run_multitarget.py --model data/models/surrogate.pt --trials 80 --outdir data/multitarget/ --targets "10:8:A10_B8, 1:8:A1_B8, 60:20:A60_B20"
```

**Repo Map**
- `src/biocircuitai/simulate/` — ODEs and sweeps (`models.py`, `ode_solver.py`, `experiments.py`)
- `src/biocircuitai/surrogate/` — dataset, preprocessing, model, training, evaluation
- `src/biocircuitai/control/` — optimization + DBTL orchestration (`optimizer.py`, `multitarget.py`, `scheduler.py`)
- `src/biocircuitai/io/` — logging + simple run registry (`logging.py`, `storage.py`)
- `src/biocircuitai/config.py` — grids, bounds, targets, seeds, paths
- `scripts/` — CLI entry points; `tests/` — light coverage for ODE, training, BO
- `notebooks/` — optional exploration and diagnostics

**What It Does**
- Simulates canonical circuits (toggle switch; repressilator stub) via `scipy.integrate.solve_ivp`.
- Trains a normalized MLP surrogate mapping circuit parameters → steady-state phenotype summaries.
- Uses Bayesian optimization to propose parameters hitting target phenotypes; validates on the true ODE.
- Logs runs, artifacts, and plots for review; registry CSV captures status and outputs.

**Why It Matters**
- Speeds up exploration of wet-lab-relevant parameter spaces with a fast differentiable surrogate.
- Shows an applied stack across dynamical systems, ML, BO, and reproducible tooling.
- Serves as a clear starting point for richer biophysical models, constraints, and multi-objective design.

**Key Design Choices**
- Inputs: eight physical-ish parameters (`alpha_A/B`, `K_A/B`, `n_A/B`, `dA/dB`); targets: steady states (`steady_A`, `steady_B`).
- Preprocessing: log1p on rate/affinity-like inputs (`K_*`, `d*`) plus `StandardScaler` on X and Y.
- Surrogate: compact configurable MLP with dropout; deterministic seeding throughout.
- Optimization: Optuna TPE minimizes `|A−tA| + |B−tB|` with light L2 on parameters; validations and plots saved per run.

**Outputs & Artifacts**
- Datasets: `data/processed/toggle_dataset.csv` or per-run under `data/dbtl/<run_id>/`.
- Models/scalers: `data/models/surrogate.pt`, `data/models/scalers.joblib` (or run-specific equivalents).
- Optimization: best-parameter JSON, convergence plot, and true ODE trajectory in the chosen `--outdir`.
- Logs: timestamped text logs in `logs/` plus registry at `data/registry.csv`.

**Extending**
- Add phenotypes: incorporate dynamics (rise time, overshoot) in `simulate/ode_solver.py` summaries and `TARGET_COLS`.
- Multi-objective design: Pareto BO or scalarization in `control/optimizer.py`.
- Constraints: feasibility penalties, parameter tying, or library constraints.
- Alternative surrogates: boosted trees, GPs for uncertainty, ensembles.
- Noisy/stoichiometric models: SSA or SDE backends.

**Assumptions & Limitations**
- Current surrogate targets deterministic steady-state means for a simple toggle switch; no measurement noise or cell-to-cell variation.
- Bounds/grids are illustrative; tune to your biology and units.

**Reviewer Guide**
- Separation of concerns (simulate/surrogate/control/io) with small surface area.
- Deterministic seeds, Windows-safe parallel sweeps, registry logging.
- Hooks for new ODEs in `simulate/models.py`, targets/objectives in `control/optimizer.py`.
- Tests cover ODE integration, training loop viability, and BO execution.

**Acknowledgements**
- Built to showcase applied modeling and ML for genetic circuit design; inspired by classic toggle-switch/repressilator literature and standard BO workflows.
